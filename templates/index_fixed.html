<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Media Scraper</title>
    
    <!-- Load external resources first -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        // Define critical functions immediately before any HTML that might use them
        
        // Reset credits function (for development)
        function resetCreditsForTesting() {
            fetch('/dev/reset-credits', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ credits: 50 })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showNotification('Credits reset to 50 for testing', 'success');
                    loadUserSubscriptionInfo();
                } else {
                    showError('Failed to reset credits: ' + data.error);
                }
            })
            .catch(error => {
                console.error('Error resetting credits:', error);
                showError('Failed to reset credits');
            });
        }
        
        // Section navigation function
        function showSection(sectionName) {
            console.log(`ðŸ”„ showSection called with: ${sectionName}`);
            
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.style.display = 'none');
            
            // Show selected section
            const selectedSection = document.getElementById(sectionName + 'Section');
            if (selectedSection) {
                selectedSection.style.display = 'block';
            }
            
            // Update navigation
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            const activeNavItem = Array.from(navItems).find(item => 
                item.getAttribute('data-section') === sectionName
            );
            if (activeNavItem) {
                activeNavItem.classList.add('active');
            }
            
            // Handle section-specific loading
            switch(sectionName) {
                case 'dashboard':
                    if (typeof loadDashboard === 'function') loadDashboard();
                    break;
                case 'assets':
                    if (typeof loadAssets === 'function') loadAssets();
                    break;
                case 'sources':
                    if (typeof loadSources === 'function') loadSources();
                    break;
            }
        }
        
        // Notification functions
        function showNotification(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
            // Add your notification UI logic here
        }
        
        function showError(message) {
            showNotification(message, 'error');
        }
        
        function showSuccess(message) {
            showNotification(message, 'success');
        }
        
        function showWarning(message) {
            showNotification(message, 'warning');
        }
        
        // Placeholder functions to prevent errors
        function loadUserSubscriptionInfo() {
            console.log('Loading user subscription info...');
            return Promise.resolve();
        }
        
        function loadDashboard() {
            console.log('Loading dashboard...');
        }
        
        function loadAssets() {
            console.log('Loading assets...');
        }
        
        function loadSources() {
            console.log('Loading sources...');
        }
    </script>
</head>
<body>
    <!-- Your HTML content here -->
    <div>Fixed template - replace this with your actual HTML content</div>
    
    <!-- Bootstrap JS at the end -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 