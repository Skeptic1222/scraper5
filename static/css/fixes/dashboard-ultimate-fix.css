/**
 * Dashboard Ultimate Fix
 * Ensures sidebar stays fixed regardless of any other CSS
 * Must load last to override all other styles
 */

/* Force sidebar to stay fixed - ULTIMATE OVERRIDE */
.sidebar,
[class*="sidebar"],
#sidebar,
.nav-sidebar,
.side-nav {
    position: fixed !important;
    top: 60px !important;
    left: 0 !important;
    bottom: 0 !important;
    width: 260px !important;
    height: calc(100vh - 60px) !important;
    z-index: 9998 !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    transform: none !important;
    transition: none !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Ensure content area has proper margin */
.content-area,
#main-content,
.main-content,
[class*="content-area"] {
    margin-left: 260px !important;
    padding-top: 0 !important;
    min-height: calc(100vh - 60px) !important;
}

/* Fix navbar positioning */
.navbar,
#navbar,
.top-nav {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 60px !important;
    z-index: 9999 !important;
}

/* Force body and html proper setup */
html {
    overflow-y: auto !important;
    overflow-x: hidden !important;
    scroll-behavior: smooth !important;
}

body {
    padding-top: 60px !important;
    overflow-x: hidden !important;
    margin: 0 !important;
}

/* Ensure dashboard section shows properly */
#dashboard-section {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    position: relative !important;
    z-index: 1 !important;
}

/* Fix any section transitions */
.content-section {
    transition: none !important;
    transform: none !important;
}

/* Make sure active sections are visible */
.content-section.active {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
}

/* Prevent any elements from overlapping sidebar */
* {
    max-width: calc(100vw - 260px) !important;
}

/* Exclude sidebar from max-width rule */
.sidebar,
[class*="sidebar"] {
    max-width: 260px !important;
}

/* Fix main container */
.main-container {
    display: flex !important;
    min-height: calc(100vh - 60px) !important;
    position: relative !important;
    margin-top: 0 !important;
}

/* Ensure sidebar links work */
.sidebar a,
.sidebar button,
.nav-item {
    position: relative !important;
    z-index: 10000 !important;
    pointer-events: auto !important;
}

/* Remove any transforms on dashboard click */
.sidebar.dashboard-active,
.sidebar[data-section="dashboard"] {
    transform: translateX(0) !important;
    left: 0 !important;
    position: fixed !important;
}

/* Debug helpers - red border on sidebar to ensure it's visible */
@media (max-width: 99999px) {
    .sidebar {
        box-shadow: 2px 0 10px rgba(0,0,0,0.1) !important;
        background: var(--sidebar-bg, #f8f9fa) !important;
    }
}

/* Force show sidebar even if hidden by JavaScript */
.sidebar[style*="display: none"],
.sidebar[style*="visibility: hidden"],
.sidebar.hidden,
.sidebar.d-none {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* Override any negative margins or positions */
.sidebar[style*="left: -"],
.sidebar[style*="margin-left: -"],
.sidebar[style*="transform: translateX(-"] {
    left: 0 !important;
    margin-left: 0 !important;
    transform: translateX(0) !important;
}

/* Ensure sidebar stays on top of content */
.sidebar::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: inherit;
    z-index: -1;
}

/* Extra insurance for dashboard navigation */
[data-section="dashboard"] .sidebar,
.dashboard-view .sidebar,
#dashboard-section ~ .sidebar {
    position: fixed !important;
    left: 0 !important;
    display: block !important;
}